@inject IDialogService DialogService
<MudPaper Elevation="3">
    <MudGrid Class="d-flex justify-center">
        <MudItem>
            <MudText Typo="Typo.h5"><b>Konačni obračun</b></MudText>
        </MudItem>
    </MudGrid>
    <MudGrid Class="d-flex justify-center">
        <MudItem Class="mb-3">
            <MudText Typo="Typo.caption">Izaberite mesec i godinu konačnog obračuna</MudText>
        </MudItem>
    </MudGrid>
    <MudGrid Class="d-flex justify-center">
        <MudItem>
            <MudSelect @bind-Value="Year" T="int" Label="Godina" Variant="Variant.Outlined" AnchorOrigin="Origin.BottomCenter">
                @for (int i = 2020; i <= 2023; i++)
                {
                    <MudSelectItem T="int" Value="i" />
                }
            </MudSelect>
        </MudItem>
    </MudGrid>
    <MudGrid Class="d-flex justify-center">
        <MudItem>
            <MudSelect @bind-Value="Month" T="int" Label="Mesec" Variant="Variant.Outlined" AnchorOrigin="Origin.BottomCenter">
                @for (int i = 1; i < 13; i++)
                {
                    <MudSelectItem T="int" Value="i" />
                }
            </MudSelect>
        </MudItem>
    </MudGrid>
    <MudGrid Class="d-flex justify-center">
        <MudItem Class="mb-3 mt-3">
            <MudButton Variant="Variant.Filled" Size="Size.Small" Disabled="@_processing" OnClick="@(async ()=> await GetFinalSettlements(Year,Month))" Color="Color.Success">
                @if (_processing)
                {
                    <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                    <MudText Class="ms-2">Obrada...</MudText>
                }
                else
                {
                    <MudText>Konacni Obracun</MudText>
                }
            </MudButton>
        </MudItem>
    </MudGrid>
</MudPaper>